(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25536,66880,e=>{"use strict";function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.s(["bannersApi",()=>l],25536),e.s(["default",()=>s],66880),e.i(74094);class a extends Error{constructor(e,a,s){super(e),t(this,"status",void 0),t(this,"data",void 0),this.status=a,this.data=s,this.name="ApiError"}}let s=new class{setHeader(e,t){this.defaultHeaders[e]=t}removeHeader(e){delete this.defaultHeaders[e]}setAuthToken(e){this.setHeader("Authorization","Bearer ".concat(e))}clearAuthToken(){this.removeHeader("Authorization")}async request(e,t){let s="".concat(this.baseURL).concat(e),l=localStorage.getItem("token"),o=l?{Authorization:"Bearer ".concat(l)}:{};console.log("ðŸ”§ API Client Request:"),console.log("  URL:",s),console.log("  Method:",t.method),console.log("  Token exists:",!!l),console.log("  Token preview:",l?l.substring(0,30)+"...":"NO TOKEN"),console.log("  Headers:",{...this.defaultHeaders,...o,...t.headers});try{let e=await fetch(s,{method:t.method,headers:{...this.defaultHeaders,...o,...t.headers},body:t.body?JSON.stringify(t.body):void 0,signal:t.signal}),l=await e.json();if(!e.ok)throw new a(l.message||"HTTP error! status: ".concat(e.status),e.status,l);return l}catch(e){if(e instanceof a)throw e;if(e instanceof TypeError)throw new a("Network error. Please check your connection.",0);if(e instanceof DOMException&&"AbortError"===e.name)throw new a("Request cancelled",0);throw new a("An unexpected error occurred",0)}}async get(e,t,a){let s=t?"?".concat(new URLSearchParams(t).toString()):"";return this.request(e+s,{method:"GET",headers:null==a?void 0:a.headers,signal:null==a?void 0:a.signal})}async post(e,t,a){return this.request(e,{method:"POST",body:t,headers:null==a?void 0:a.headers,signal:null==a?void 0:a.signal})}async put(e,t,a){return this.request(e,{method:"PUT",body:t,headers:null==a?void 0:a.headers,signal:null==a?void 0:a.signal})}async patch(e,t,a){return this.request(e,{method:"PATCH",body:t,headers:null==a?void 0:a.headers,signal:null==a?void 0:a.signal})}async delete(e,t){return this.request(e,{method:"DELETE",headers:null==t?void 0:t.headers,signal:null==t?void 0:t.signal})}constructor(e){t(this,"baseURL",void 0),t(this,"defaultHeaders",void 0),this.baseURL=e,this.defaultHeaders={"Content-Type":"application/json"}}}("https://api.buyshopo.com/api"),l={list:e=>s.get("/banners",e),get:e=>s.get("/banners/".concat(e)),create:e=>s.post("/banners",e),update:(e,t)=>s.put("/banners/".concat(e)),remove:e=>s.delete("/banners/".concat(e))}},47596,6047,37097,30467,2208,14145,45380,9239,e=>{"use strict";e.s([],47596);var t=e.i(66880);e.s(["productsApi",()=>a],6047);let a={getAll:e=>t.default.get("/products",e),getById:e=>t.default.get("/products/".concat(e)),create:e=>t.default.post("/products",e),update:(e,a)=>t.default.put("/products/".concat(e),a),delete:e=>t.default.delete("/products/".concat(e)),updateStatus:(e,a)=>t.default.patch("/products/".concat(e,"/status"),{status:a}),getFeatured:()=>t.default.get("/products/featured"),setFeatured:(e,a)=>t.default.patch("/products/".concat(e,"/featured"),{featured:a})};e.s(["ordersApi",()=>s],37097);let s={getAll:e=>t.default.get("/orders",e),getById:e=>t.default.get("/orders/".concat(e)),updateStatus:(e,a)=>t.default.patch("/orders/".concat(e,"/status"),{status:a}),getRecent:e=>t.default.get("/orders/recent",e?{limit:e}:void 0),cancel:(e,a)=>t.default.post("/orders/".concat(e,"/cancel"),{reason:a})};e.s(["categoriesApi",()=>l],30467);let l={getAll:()=>t.default.get("/categories"),getById:e=>t.default.get("/categories/".concat(e)),create:e=>t.default.post("/categories",e),update:(e,a)=>t.default.put("/categories/".concat(e),a),delete:e=>t.default.delete("/categories/".concat(e))};e.s(["stylesApi",()=>o],2208);let o={getAll:e=>t.default.get("/styles?".concat(new URLSearchParams(e).toString())),getById:e=>t.default.get("/styles/".concat(e)),create:e=>t.default.post("/styles",e),update:(e,a)=>t.default.put("/styles/".concat(e),a),delete:e=>t.default.delete("/styles/".concat(e))};e.s(["dashboardApi",()=>r],14145);let r={getStats:e=>t.default.get("/dashboard/stats",e?{period:e}:void 0),getChartData:(e,a)=>t.default.get("/dashboard/charts/".concat(e),{period:a}),getSalesAnalytics:e=>t.default.get("/dashboard/sales",e),getFinanceAnalytics:e=>t.default.get("/dashboard/finance",e)};e.s(["brandsApi",()=>c],45380);let c={getAll:e=>t.default.get("/brands",e),getById:e=>t.default.get("/brands/".concat(e)),create:e=>t.default.post("/brands",e),update:(e,a)=>t.default.put("/brands/".concat(e),a),delete:e=>t.default.delete("/brands/".concat(e)),getFeatured:()=>t.default.get("/brands/featured"),getTop:e=>t.default.get("/brands/top",e?{limit:e}:void 0),setVerified:(e,a)=>t.default.patch("/brands/".concat(e,"/verify"),{verified:a})};e.s(["notificationsApi",()=>i],9239);let i={getAll:e=>t.default.get("/notifications",e),getById:e=>t.default.get("/notifications/".concat(e)),create:e=>t.default.post("/notifications",e),delete:e=>t.default.delete("/notifications/".concat(e)),getHistory:e=>t.default.get("/notifications/history",e),send:e=>t.default.post("/notifications/".concat(e,"/send"))};e.i(25536)},58076,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(12578),a=e.i(8643),s=e.i(42769),l=e.i(58695),o=e.i(90258);e.i(47596);var r=e.i(30467);function c(){let e=(0,l.useRouter)(),c=(0,l.useSearchParams)().get("id"),[i,n]=(0,o.useState)(!0),[d,u]=(0,o.useState)(!1),[m,g]=(0,o.useState)({categoryName:"",categorySlug:"",parentCategory:"",categoryStatus:"active",categoryDescription:""}),[h,p]=(0,o.useState)({metaTitle:"",metaDescription:"",metaKeywords:""}),[b,x]=(0,o.useState)({productCount:0,subcategories:0,createdAt:"",updatedAt:""}),[y,f]=(0,o.useState)(""),[j,N]=(0,o.useState)(null),[v,A]=(0,o.useState)("");(0,o.useEffect)(()=>{c&&C()},[c]);let C=async()=>{try{n(!0);let e=(await r.categoriesApi.getById(c)).data;g({categoryName:e.name||"",categorySlug:e.slug||"",parentCategory:e.parentId||"",categoryStatus:e.status||"active",categoryDescription:e.description||""}),e.seo&&p(e.seo),e.image&&f(e.image),x({productCount:e.productCount||0,subcategories:e.subcategories||0,createdAt:e.createdAt||"",updatedAt:e.updatedAt||""})}catch(t){console.error("Failed to fetch category:",t),alert("Failed to load category"),e.push("/category-list")}finally{n(!1)}},S=e=>{let{name:t,value:a}=e.target;g(e=>({...e,[t]:a}))},w=e=>{let{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))},D=async()=>{if(confirm("Are you sure you want to delete this category?"))try{console.log("ðŸ—‘ï¸ Deleting category:",c);let t=await r.categoriesApi.delete(c);console.log("âœ… Category deleted:",t),e.push("/category-list")}catch(t){console.error("âŒ Delete failed:",t),401===t.status&&(localStorage.removeItem("token"),e.push("/login"))}},E=async t=>{t.preventDefault(),u(!0);try{let t=y;if(j){console.log("ðŸ“¤ UPLOADING NEW IMAGE...");let e=new FormData;e.append("images",j);let a=localStorage.getItem("token"),s=await fetch("".concat("https://api.buyshopo.com/api","/upload/images"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:e});if(!s.ok)throw Error("Failed to upload image");t=(await s.json()).data.urls[0],console.log("âœ… NEW IMAGE UPLOADED:",t)}let a={name:m.categoryName,description:m.categoryDescription||void 0,status:m.categoryStatus,slug:m.categorySlug,parentId:m.parentCategory||void 0,image:t||void 0,seo:h};console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("ðŸ“¤ UPDATE CATEGORY REQUEST"),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("Category ID:",c),console.log("Category Data:",a);let s=await r.categoriesApi.update(c,a);console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("âœ… UPDATE CATEGORY SUCCESS"),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("Response:",s),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),e.push("/category-list")}catch(t){console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("âŒ UPDATE CATEGORY FAILED"),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.error("Error:",t),console.error("Status:",t.status),console.error("Message:",t.message),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),401===t.status&&(console.warn("ðŸ” Authentication failed - redirecting to login"),localStorage.removeItem("token"),e.push("/login"))}finally{u(!1)}};return i?(0,t.jsx)(a.default,{pageTitle:"Edit Category",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[(0,t.jsx)("div",{className:"spinner-border text-primary"}),(0,t.jsx)("p",{className:"mt-2",children:"Loading category..."})]})}):(0,t.jsx)(a.default,{pageTitle:"Edit Category",children:(0,t.jsxs)("div",{className:"container-fluid",children:[(0,t.jsx)("div",{className:"row mb-3",children:(0,t.jsx)("div",{className:"col-12",children:(0,t.jsx)("nav",{"aria-label":"breadcrumb",children:(0,t.jsxs)("ol",{className:"breadcrumb",children:[(0,t.jsx)("li",{className:"breadcrumb-item",children:(0,t.jsx)(s.default,{href:"/",children:"Home"})}),(0,t.jsx)("li",{className:"breadcrumb-item",children:(0,t.jsx)(s.default,{href:"/category-list",children:"Categories"})}),(0,t.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Edit Category"})]})})})}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-lg-8",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h5",{className:"card-title mb-0",children:"Category Information"})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("form",{onSubmit:E,children:[(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("div",{className:"col-12 mb-4",children:[(0,t.jsx)("label",{className:"form-label fw-bold",children:"Category Image"}),(0,t.jsxs)("div",{className:"border rounded p-3 bg-light",children:[y&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("small",{className:"text-muted d-block mb-2",children:"Current Image:"}),(0,t.jsxs)("div",{className:"position-relative d-inline-block",children:[(0,t.jsx)("img",{src:y.startsWith("http")?y:"".concat("https://api.buyshopo.com/api".replace("/api","")||"http://localhost:8000").concat(y),alt:"Current Category",className:"img-fluid rounded border",style:{width:"150px",height:"150px",objectFit:"cover"},onError:e=>{e.target.src="/assets/images/products/product-1.png"}}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger btn-sm position-absolute top-0 end-0 m-1",onClick:()=>{f("")},title:"Remove current image",children:(0,t.jsx)("i",{className:"bx bx-x"})}),(0,t.jsx)("span",{className:"badge bg-success position-absolute bottom-0 start-0 m-1",children:"Current"})]})]}),v&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("small",{className:"text-muted d-block mb-2",children:"New Image to Upload:"}),(0,t.jsxs)("div",{className:"position-relative d-inline-block",children:[(0,t.jsx)("img",{src:v,alt:"New Category Preview",className:"img-fluid rounded border",style:{width:"150px",height:"150px",objectFit:"cover"}}),(0,t.jsx)("button",{type:"button",className:"btn btn-danger btn-sm position-absolute top-0 end-0 m-1",onClick:()=>{N(null),A("")},title:"Remove new image",children:(0,t.jsx)("i",{className:"bx bx-x"})}),(0,t.jsx)("span",{className:"badge bg-warning position-absolute bottom-0 end-0 m-1",children:"New"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",className:"form-control",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){N(a);let e=new FileReader;e.onload=e=>{var t;A(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(a)}}}),(0,t.jsxs)("small",{className:"text-muted d-block mt-2",children:[(0,t.jsx)("i",{className:"bx bx-info-circle me-1"}),"Add a new image or replace the existing one. Recommended size: 400x400px"]})]})]})]}),(0,t.jsxs)("div",{className:"col-12 mb-3",children:[(0,t.jsx)("hr",{className:"my-2"}),(0,t.jsx)("h6",{className:"text-muted",children:"Category Information"})]}),(0,t.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,t.jsxs)("label",{htmlFor:"categoryName",className:"form-label",children:["Category Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"categoryName",name:"categoryName",value:m.categoryName,onChange:S,required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,t.jsx)("label",{htmlFor:"categorySlug",className:"form-label",children:"Category Slug"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"categorySlug",name:"categorySlug",value:m.categorySlug,onChange:S,placeholder:"category-slug"})]}),(0,t.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,t.jsx)("label",{htmlFor:"parentCategory",className:"form-label",children:"Parent Category"}),(0,t.jsxs)("select",{className:"form-select",id:"parentCategory",name:"parentCategory",value:m.parentCategory,onChange:S,children:[(0,t.jsx)("option",{value:"",children:"Select parent category"}),(0,t.jsx)("option",{value:"electronics",children:"Electronics"}),(0,t.jsx)("option",{value:"clothing",children:"Clothing"}),(0,t.jsx)("option",{value:"books",children:"Books"})]})]}),(0,t.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,t.jsx)("label",{htmlFor:"categoryStatus",className:"form-label",children:"Status"}),(0,t.jsxs)("select",{className:"form-select",id:"categoryStatus",name:"categoryStatus",value:m.categoryStatus,onChange:S,children:[(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,t.jsxs)("div",{className:"col-12 mb-3",children:[(0,t.jsx)("label",{htmlFor:"categoryDescription",className:"form-label",children:"Description"}),(0,t.jsx)("textarea",{className:"form-control",id:"categoryDescription",name:"categoryDescription",rows:4,value:m.categoryDescription,onChange:S})]})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"bx bx-save me-1"}),"Update Category"]})}),(0,t.jsxs)(s.default,{href:"/category-list",className:"btn btn-outline-secondary",children:[(0,t.jsx)("i",{className:"bx bx-x me-1"}),"Cancel"]}),(0,t.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:D,children:[(0,t.jsx)("i",{className:"bx bx-trash me-1"}),"Delete"]})]})]})})]})}),(0,t.jsxs)("div",{className:"col-lg-4",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h5",{className:"card-title mb-0",children:"SEO Settings"})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"metaTitle",className:"form-label",children:"Meta Title"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"metaTitle",name:"metaTitle",placeholder:"SEO title",value:h.metaTitle,onChange:w})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"metaDescription",className:"form-label",children:"Meta Description"}),(0,t.jsx)("textarea",{className:"form-control",id:"metaDescription",name:"metaDescription",rows:3,placeholder:"SEO description",value:h.metaDescription,onChange:w})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"metaKeywords",className:"form-label",children:"Meta Keywords"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"metaKeywords",name:"metaKeywords",placeholder:"keyword1, keyword2",value:h.metaKeywords,onChange:w})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h5",{className:"card-title mb-0",children:"Category Stats"})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"row text-center",children:[(0,t.jsxs)("div",{className:"col-6",children:[(0,t.jsx)("h4",{className:"text-primary mb-1",children:b.productCount}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Products"})]}),(0,t.jsxs)("div",{className:"col-6",children:[(0,t.jsx)("h4",{className:"text-success mb-1",children:b.subcategories}),(0,t.jsx)("p",{className:"text-muted mb-0",children:"Subcategories"})]})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,t.jsx)("small",{className:"text-muted",children:"Created:"}),(0,t.jsx)("small",{children:b.createdAt?new Date(b.createdAt).toLocaleDateString():"N/A"})]}),(0,t.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,t.jsx)("small",{className:"text-muted",children:"Updated:"}),(0,t.jsx)("small",{children:b.updatedAt?new Date(b.updatedAt).toLocaleDateString():"N/A"})]})]})]})]})]})]})})}}]);