(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25417,e=>{"use strict";e.s(["InteractiveTable",()=>s.default]),e.i(11847),e.i(58341);var s=e.i(58502);e.i(17403)},35675,58341,58502,17403,11847,e=>{"use strict";e.s([],35675),e.i(18376),e.i(88424),e.s([],11847),e.s(["default",()=>l],58341);var s=e.i(12578),a=e.i(90258);function l(e){let{isOpen:l,onClose:t,onSubmit:i}=e,[r,n]=(0,a.useState)({productId:"",customerName:"",customerEmail:"",rating:5,review:"",status:"pending"}),c=e=>{let{name:s,value:a}=e.target;n(e=>({...e,[s]:a}))};return l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"modal-backdrop fade show"}),(0,s.jsx)("div",{className:"modal fade show",style:{display:"block"},tabIndex:-1,children:(0,s.jsx)("div",{className:"modal-dialog modal-lg",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h5",{className:"modal-title",children:"Add New Review"}),(0,s.jsx)("button",{type:"button",className:"btn-close",onClick:t,"aria-label":"Close"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(r),t(),n({productId:"",customerName:"",customerEmail:"",rating:5,review:"",status:"pending"})},children:[(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,s.jsx)("label",{htmlFor:"productId",className:"form-label",children:"Product"}),(0,s.jsxs)("select",{className:"form-select",id:"productId",name:"productId",value:r.productId,onChange:c,required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Product"}),(0,s.jsx)("option",{value:"1",children:"G15 Gaming Laptop"}),(0,s.jsx)("option",{value:"2",children:"Sony Alpha Camera"}),(0,s.jsx)("option",{value:"3",children:"Wireless Headphones"}),(0,s.jsx)("option",{value:"4",children:"Smart Watch"}),(0,s.jsx)("option",{value:"5",children:"Bluetooth Speaker"})]})]}),(0,s.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,s.jsx)("label",{htmlFor:"status",className:"form-label",children:"Status"}),(0,s.jsxs)("select",{className:"form-select",id:"status",name:"status",value:r.status,onChange:c,children:[(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"approved",children:"Approved"}),(0,s.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,s.jsx)("label",{htmlFor:"customerName",className:"form-label",children:"Customer Name"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"customerName",name:"customerName",value:r.customerName,onChange:c,required:!0})]}),(0,s.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,s.jsx)("label",{htmlFor:"customerEmail",className:"form-label",children:"Customer Email"}),(0,s.jsx)("input",{type:"email",className:"form-control",id:"customerEmail",name:"customerEmail",value:r.customerEmail,onChange:c,required:!0})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"rating",className:"form-label",children:"Rating"}),(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("input",{type:"range",className:"form-range me-3",id:"rating",name:"rating",min:"1",max:"5",value:r.rating,onChange:c,style:{width:"200px"}}),(0,s.jsxs)("div",{className:"d-flex",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("i",{className:"bx ".concat(e<=r.rating?"bxs-star text-warning":"bx-star text-muted"," fs-20 me-1")},e)),(0,s.jsxs)("span",{className:"ms-2 fw-semibold",children:[r.rating,"/5"]})]})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"review",className:"form-label",children:"Review Text"}),(0,s.jsx)("textarea",{className:"form-control",id:"review",name:"review",rows:4,value:r.review,onChange:c,placeholder:"Write your review here...",required:!0})]})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Review"})]})]})]})})})]}):null}e.s(["default",()=>n],58502);var t=e.i(76708),i=e.i(99430),r=e.i(83961),r=r;function n(e){let{data:l,columns:n,filters:c=[],searchFields:o=[],itemsPerPage:d=10,className:m="",onRowClick:x,onEdit:h,onDelete:u,showActions:j=!0,showSearch:p=!0,showFilters:v=!0,showPagination:b=!0}=e,[N,g]=(0,a.useState)(""),[f,y]=(0,a.useState)("asc"),{filters:w,updateFilter:C,clearFilters:k}=(0,t.useFilters)(),{searchTerm:S,setSearchTerm:I,filteredData:A}=(0,t.useSearch)(l,o),{currentData:B,currentPage:P,totalPages:z,goToPage:E,nextPage:F,prevPage:T,hasNextPage:R,hasPrevPage:L}=(0,t.usePagination)(A,d),D=(0,a.useMemo)(()=>N?[...B].sort((e,s)=>{let a=e[N],l=s[N];return a<l?"asc"===f?-1:1:a>l?"asc"===f?1:-1:0}):B,[B,N,f]),W=(e,s)=>{C(e,s)};return(0,s.jsxs)("div",{className:"interactive-table ".concat(m),children:[(p||v)&&(0,s.jsxs)("div",{className:"row mb-3",children:[p&&(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("span",{className:"input-group-text",children:(0,s.jsx)("i",{className:"bx bx-search"})}),(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Search...",value:S,onChange:e=>I(e.target.value)})]})}),v&&c.length>0&&(0,s.jsx)("div",{className:"col-md-6",children:(0,s.jsxs)("div",{className:"d-flex gap-2 flex-wrap",children:[c.map(e=>(0,s.jsx)("div",{className:"flex-grow-1",style:{minWidth:"150px"},children:"select"===e.type?(0,s.jsx)(r.default,{options:e.options||[],value:w[e.key],onChange:s=>W(e.key,s),placeholder:e.label,className:"w-100"}):(0,s.jsx)("input",{type:e.type,className:"form-control",placeholder:e.label,value:w[e.key]||"",onChange:s=>W(e.key,s.target.value)})},e.key)),(0,s.jsxs)(i.InteractiveButton,{variant:"outline-secondary",size:"sm",onClick:()=>{k(),I("")},children:[(0,s.jsx)("i",{className:"bx bx-x me-1"}),"Clear"]})]})})]}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[n.map(e=>(0,s.jsx)("th",{style:{width:e.width},className:e.sortable?"cursor-pointer":"",onClick:e.sortable?()=>{var s;N===(s=e.key)?y("asc"===f?"desc":"asc"):(g(s),y("asc"))}:void 0,children:(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[e.label,e.sortable&&(0,s.jsx)("i",{className:"bx ".concat(N!==e.key?"bx-sort":"asc"===f?"bx-sort-up":"bx-sort-down"," ms-1")})]})},e.key)),j&&(0,s.jsx)("th",{width:"120",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:D.map((e,a)=>(0,s.jsxs)("tr",{className:x?"cursor-pointer":"",onClick:x?()=>x(e):void 0,children:[n.map(a=>(0,s.jsx)("td",{children:a.render?a.render(e[a.key],e):e[a.key]},a.key)),j&&(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"btn-group btn-group-sm",children:[h&&(0,s.jsx)(i.InteractiveButton,{variant:"outline-primary",size:"sm",onClick:()=>h(e),children:(0,s.jsx)("i",{className:"bx bx-edit"})}),u&&(0,s.jsx)(i.InteractiveButton,{variant:"outline-danger",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this item?")&&u(e)},children:(0,s.jsx)("i",{className:"bx bx-trash"})})]})})]},a))})]})}),b&&z>1&&(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,s.jsxs)("div",{className:"text-muted",children:["Showing ",(P-1)*d+1," to ",Math.min(P*d,l.length)," of ",l.length," entries"]}),(0,s.jsxs)("div",{className:"d-flex gap-1",children:[(0,s.jsx)(i.InteractiveButton,{variant:"outline-secondary",size:"sm",onClick:T,disabled:!L,children:(0,s.jsx)("i",{className:"bx bx-chevron-left"})}),Array.from({length:Math.min(5,z)},(e,a)=>{let l=a+1;return(0,s.jsx)(i.InteractiveButton,{variant:P===l?"primary":"outline-secondary",size:"sm",onClick:()=>E(l),children:l},l)}),(0,s.jsx)(i.InteractiveButton,{variant:"outline-secondary",size:"sm",onClick:F,disabled:!R,children:(0,s.jsx)("i",{className:"bx bx-chevron-right"})})]})]})]})}function c(){let{notifications:e,removeNotification:a}=(0,t.useNotification)();return 0===e.length?null:(0,s.jsx)("div",{className:"notification-container position-fixed",style:{top:"20px",right:"20px",zIndex:9999,maxWidth:"400px"},children:e.map(e=>(0,s.jsx)("div",{className:"alert ".concat({success:"alert-success",error:"alert-danger",warning:"alert-warning",info:"alert-info"}[e.type]||"alert-info"," alert-dismissible fade show mb-2"),role:"alert",children:(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("i",{className:"bx ".concat({success:"bx-check-circle",error:"bx-error-circle",warning:"bx-error",info:"bx-info-circle"}[e.type]||"bx-info-circle"," me-2")}),(0,s.jsx)("span",{className:"flex-grow-1",children:e.message}),(0,s.jsx)("button",{type:"button",className:"btn-close",onClick:()=>a(e.id),"aria-label":"Close"})]})},e.id))})}e.s(["default",()=>c],17403),e.i(8643),e.i(85038),e.i(73266);e.i(88781);a.default.Component,e.i(66132)},26625,e=>{"use strict";e.s(["Layout",()=>s.default]);var s=e.i(8643)},4075,e=>{"use strict";e.s(["default",()=>i]);var s=e.i(12578);e.i(35675);var a=e.i(26625),l=e.i(25417),t=e.i(90258);function i(){let[e,i]=(0,t.useState)(""),[r,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(!0);(0,t.useEffect)(()=>{d()},[e]);let d=async()=>{try{o(!0);let s=localStorage.getItem("token"),a=new URLSearchParams;a.append("role","customer"),e&&a.append("status",e);let l=await fetch("".concat("https://api.buyshopo.com/api","/users?").concat(a),{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}),t=await l.json();n(t.data||[])}catch(e){console.error("Failed to fetch customers:",e),n([])}finally{o(!1)}},m=[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone",render:e=>e||"N/A"},{key:"status",label:"Status",render:e=>(0,s.jsx)("span",{className:"badge ".concat("active"===e?"bg-success":"bg-secondary"),children:e})},{key:"createdAt",label:"Joined",render:e=>new Date(e).toLocaleDateString()}],x=[{label:"View Details",onClick:e=>window.location.href="/customer-detail?id=".concat(e._id||e.id),className:"btn-primary btn-sm"}];return(0,s.jsx)(a.Layout,{pageTitle:"Customers",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header d-flex justify-content-between align-items-center",children:(0,s.jsxs)("h4",{className:"header-title",children:["All Customers ",c&&(0,s.jsx)("span",{className:"spinner-border spinner-border-sm ms-2"})]})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"row mb-3",children:(0,s.jsx)("div",{className:"col-md-4",children:(0,s.jsxs)("select",{className:"form-select",value:e,onChange:e=>i(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})})}),c?(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,s.jsx)("p",{className:"mt-2",children:"Loading customers from MongoDB..."})]}):0===r.length?(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("i",{className:"mdi mdi-account-multiple",style:{fontSize:"64px",color:"#ccc"}}),(0,s.jsx)("h5",{className:"mt-3",children:"No Customers Yet"}),(0,s.jsx)("p",{className:"text-muted",children:"Customers will appear here when they register."})]}):(0,s.jsx)(l.InteractiveTable,{data:r,columns:m,actions:x,itemsPerPage:15})]})]})})})})}}]);