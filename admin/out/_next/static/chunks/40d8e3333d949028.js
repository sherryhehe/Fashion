(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18639,e=>{"use strict";e.s(["default",()=>s]);var a=e.i(12578),t=e.i(8643),l=e.i(90258);function s(){let[e,s]=(0,l.useState)(!0),[r,i]=(0,l.useState)(!1),[o,n]=(0,l.useState)({name:"",email:"",phone:"",avatar:""});(0,l.useEffect)(()=>{c()},[]);let c=async()=>{try{s(!0);let e=localStorage.getItem("token");if(!e){window.location.href="/login";return}let a=await fetch("".concat("https://api.buyshopo.com/api","/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch profile");let t=await a.json();n({name:t.data.name||"",email:t.data.email||"",phone:t.data.phone||"",avatar:t.data.avatar||""})}catch(e){console.error("Failed to fetch profile:",e),alert("Failed to load profile")}finally{s(!1)}},m=e=>{let{name:a,value:t}=e.target;n(e=>({...e,[a]:t}))},d=async e=>{e.preventDefault(),i(!0);try{let e=localStorage.getItem("token");if(!(await fetch("".concat("https://api.buyshopo.com/api","/auth/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({name:o.name,phone:o.phone})})).ok)throw Error("Failed to update profile");alert("Profile updated successfully!")}catch(e){console.error("Failed to update profile:",e),alert(e.message||"Failed to update profile")}finally{i(!1)}};return e?(0,a.jsx)(t.default,{pageTitle:"My Profile",children:(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("div",{className:"spinner-border text-primary"}),(0,a.jsx)("p",{className:"mt-2",children:"Loading profile..."})]})}):(0,a.jsx)(t.default,{pageTitle:"My Profile",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-8 mx-auto",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsx)("h4",{className:"card-title mb-0",children:"Profile Settings"})}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("form",{onSubmit:d,children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-12 mb-4 text-center",children:(0,a.jsx)("div",{className:"avatar-xl mx-auto mb-3",children:o.avatar?(0,a.jsx)("img",{src:o.avatar,alt:"Avatar",className:"rounded-circle img-thumbnail",style:{width:"120px",height:"120px",objectFit:"cover"}}):(0,a.jsx)("div",{className:"avatar-title rounded-circle bg-primary text-white",style:{width:"120px",height:"120px",fontSize:"48px",lineHeight:"120px"},children:o.name.charAt(0).toUpperCase()})})}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Full Name ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:o.name,onChange:m,required:!0})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,a.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:o.email,disabled:!0}),(0,a.jsx)("small",{className:"text-muted",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",className:"form-control",id:"phone",name:"phone",value:o.phone,onChange:m,placeholder:"+1 234 567 8900"})]}),(0,a.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,a.jsx)("label",{htmlFor:"role",className:"form-label",children:"Role"}),(0,a.jsx)("input",{type:"text",className:"form-control",id:"role",value:"Administrator",disabled:!0})]})]}),(0,a.jsxs)("div",{className:"d-flex gap-2 mt-4",children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("i",{className:"mdi mdi-content-save me-1"}),"Save Changes"]})}),(0,a.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:c,children:[(0,a.jsx)("i",{className:"mdi mdi-refresh me-1"}),"Reset"]})]})]}),(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h5",{className:"mb-3",children:"Change Password"}),(0,a.jsx)("p",{className:"text-muted",children:"Want to change your password?"}),(0,a.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>window.location.href="/settings",children:[(0,a.jsx)("i",{className:"mdi mdi-lock-reset me-1"}),"Go to Settings"]})]})]})]})})})})}}]);